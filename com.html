<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Biblioteca Literaria - Autor</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* === RESET / BASE === */
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body {
  background: #fff;
  color: #333;
  min-height: 100vh;
  overflow-x: hidden;
}

/* === LOADING INDICATOR === */
.loading {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #0a1a2e;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  transition: opacity 0.5s ease-out;
}

.loading.hidden {
  opacity: 0;
  pointer-events: none;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid rgba(241, 196, 15, 0.2);
  border-radius: 50%;
  border-top-color: #f1c40f;
  animation: spin 1s linear infinite;
  margin-bottom: 20px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  color: #f1c40f;
  font-size: 1.2rem;
}

/* === HEADER / SLIDER === */
.header-container {
  background: #0a1a2e;
  position: relative;
  margin-bottom: 40px;
}
.top-menu {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background: transparent;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  position: relative;
  z-index: 10;
}
.logo { display:flex; align-items:center; gap:10px; }
.logo h1 { color:#f1c40f; font-size:1.5rem; text-shadow:2px 2px 4px rgba(0,0,0,0.5); }
.menu-icons { display:flex; gap:15px; }
.menu-icon { color:#f1c40f; font-size:1.3rem; cursor:pointer; transition: transform .3s, color .3s; }
.menu-icon:hover { color:#fff; transform: translateY(-3px); }

.slider-container { 
  position:relative; 
  width:100%; 
  height:800px; /* ✅ AUMENTADO A 800PX — AHORA SÍ SE VE LA IMAGEN ENTERA */
  overflow:hidden; 
  background: #061120;
}
.slide { 
  position:absolute; 
  width:100%; 
  height:100%; 
  opacity:0; 
  transition:opacity 1.2s ease-in-out; 
  z-index:1; 
  background: #1a2b4a;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 0 40px;
  position: relative;
  overflow: hidden;
}
.slide.active { opacity:1; z-index:2; }
.slide img { 
  width:100%; 
  height:100%; 
  object-fit:cover; 
  display:block;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  min-height: 100%;
  min-width: 100%;
  z-index: 1;
}
.slide-overlay {
  position:relative;
  background: transparent;
  color:#fff;
  z-index:3;
  padding: 40px;
  max-width: 800px;
  text-align: center;
}
.slide-title { 
  font-size: 2.5rem; 
  color:#f1c40f; 
  margin-bottom:15px; 
  font-weight:700;
  text-shadow: 0 2px 10px rgba(0,0,0,0.5);
  letter-spacing: -0.5px;
}
.slide-description { 
  font-size: 1.3rem; 
  max-width: 700px; 
  margin-bottom: 30px;
  line-height: 1.7;
  text-shadow: 0 1px 8px rgba(0,0,0,0.4);
  font-weight: 300;
}
.btn-buy {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 14px 32px;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(241, 196, 15, 0.5);
  color: #f1c40f;
  font-weight: 700;
  border-radius: 30px;
  text-decoration: none;
  font-size: 1rem;
  transition: all 0.4s ease;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  letter-spacing: 0.5px;
}
.btn-buy:hover {
  background: rgba(255,255,255,0.2);
  border-color: #f1c40f;
  transform: translateY(-5px);
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
}

.slider-nav { 
  position:absolute; 
  bottom:30px; 
  left:50%; 
  transform:translateX(-50%); 
  display:flex; 
  gap:12px; 
  z-index:4; 
  pointer-events: none;
}
.slider-dot { 
  width:12px; 
  height:12px; 
  border-radius:50%; 
  background:rgba(255,255,255,0.3); 
  cursor:pointer; 
  transition: transform .2s, background .2s;
  pointer-events: auto;
}
.slider-dot.active { 
  background:#f1c40f; 
  transform:scale(1.4); 
}

/* === SECCIÓN AUTOR === */
.author-section {
  padding: 0px 20px;
  background: #fff;
  margin: 0 auto 60px;
  max-width: 1200px;
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.05);
  text-align: center;
}
.author-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 25px;
}
.author-image {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid #f1c40f;
  box-shadow: 0 0 20px rgba(241, 196, 15, 0.3);
}
.author-info {
  max-width: 800px;
}
.author-name {
  font-size: 2.2rem;
  color: #0a1a2e;
  margin-bottom: 10px;
  position: relative;
  display: inline-block;
}
.author-name:after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 3px;
  background: #f1c40f;
}
.author-bio {
  font-size: 1.1rem;
  line-height: 1.7;
  color: #555;
  margin-bottom: 20px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}
.author-details {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}
.author-detail {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
  min-width: 150px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.05);
}
.detail-value {
  font-size: 1.5rem;
  font-weight: bold;
  color: #f1c40f;
  margin-bottom: 5px;
}
.detail-label {
  font-size: 0.9rem;
  color: #888;
}

/* === LIBROS === */
.books-section {
  background: #fff;
  padding: 0 10px 20px;
  margin: 0 auto 60px;
  max-width: 1200px;
}
.books-header {
  text-align: center;
  margin-bottom: 0px;
}
.books-header h2 {
  font-size: 2rem;
  color: #0a1a2e;
  font-weight: 700;
  position: relative;
  display: inline-block;
}
.books-header h2:after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 4px;
  background: #f1c40f;
  border-radius: 2px;
}

.books-grid {
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:20px;
  padding:0 15px;
  max-width: 1200px;
  margin: 0 auto;
}
.card {
  width:100%; 
  border-radius:12px; 
  overflow:hidden; 
  position:relative;
  cursor:pointer; 
  transition: all .4s ease; 
  display:block; 
  text-decoration:none; 
  color:inherit;
  box-shadow: 0 8px 25px rgba(0,0,0,0.08);
  background: #fff;
  aspect-ratio: 2/3;
}
.card img { 
  width:100%; 
  height: 100%; 
  object-fit:cover; 
  display:block; 
  transition: transform .6s;
}
.card-overlay {
  position:absolute; 
  bottom:0; 
  left:0; 
  right:0;
  background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
  padding:20px; 
  z-index:2; 
  transform: translateY(100%); 
  transition: transform .4s ease;
}
.card-title { 
  font-size:16px; 
  font-weight:bold; 
  margin-bottom:6px; 
  color:#f1c40f;
  line-height:1.3;
}
.card-author { 
  font-size:14px; 
  opacity:0.9;
  color:#ddd;
}
.card:hover { 
  transform: translateY(-8px); 
  box-shadow: 0 12px 30px rgba(0,0,0,0.15); 
}
.card:hover img { 
  transform: scale(1.03); 
}
.card:hover .card-overlay { 
  transform: translateY(0); 
}

/* === MODAL === */
.modal { 
  display:none; 
  position:fixed; 
  inset:0; 
  z-index:1000; 
  background-color: rgba(0,0,0,0.85); 
  overflow-y: auto; 
  padding: 20px;
}
.modal::-webkit-scrollbar { display:none; }
.modal.show { display:block; }
.modal-container { 
  width: 100%; 
  max-width: 1000px; 
  margin: 40px auto; 
  background: #fff; 
  color:#333; 
  border-radius:16px; 
  display:flex; 
  flex-direction:column; 
  box-shadow: 0 20px 50px rgba(0,0,0,0.2); 
  overflow: hidden;
  position: relative;
}
.modal-header { 
  padding:25px 30px; 
  background:#f8f9fa; 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  border-bottom:1px solid #eee; 
}
.modal-title { 
  font-size:1.8rem; 
  color:#0a1a2e; 
  max-width:80%; 
  word-wrap:break-word; 
  font-weight:700;
}
.close { 
  font-size:28px; 
  color:#888; 
  font-weight:bold; 
  cursor:pointer; 
  background:none; 
  border:none; 
  transition: transform .25s, color .25s; 
}
.close:hover { 
  transform: rotate(90deg); 
  color:#f1c40f;
}
.modal-content { 
  display:flex; 
  flex-direction:column; 
  align-items:flex-start; 
  gap:0; 
}
.modal-left { 
  width:100%; 
  padding:30px; 
  display:flex; 
  flex-direction:column; 
  align-items:center; 
  background:#fafafa; 
  border-bottom:1px solid #eee; 
}
.modal-left img { 
  width:100%; 
  max-width:200px; 
  height:auto; 
  object-fit:cover; 
  border-radius:12px; 
  box-shadow:0 8px 20px rgba(0,0,0,0.1); 
  margin-bottom:20px; 
}
.modal-rating {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 15px 0;
  font-size: 1.6rem;
  color: #f1c40f;
}
.modal-rating i {
  transition: transform 0.2s ease;
}
.modal-rating i:hover {
  transform: scale(1.2);
}
.rating-text {
  font-size: 1rem;
  color: #777;
  margin-left: 10px;
  font-weight: 500;
}
.modal-details { width:100%; }
.detail-item { 
  display:flex; 
  justify-content:space-between; 
  margin-bottom:12px; 
  padding-bottom:12px; 
  border-bottom:1px solid #eee; 
}
.detail-label { 
  font-weight:bold; 
  color:#0a1a2e; 
  font-size:0.95rem; 
}
.detail-value { 
  text-align:right; 
  font-size:0.95rem; 
  color:#555;
}

.modal-right { 
  width:100%; 
  display:flex; 
  flex-direction:column; 
  padding:30px; 
  gap:15px; 
  background:#fff;
}
.modal-subtitle { 
  font-size:1.3rem; 
  color:#e67e22; 
  margin-bottom:10px; 
  font-weight:normal; 
}
.modal-description-container { }
.modal-description { 
  line-height:1.7; 
  font-size:1.05rem; 
  margin-bottom:15px; 
  color:#444;
}
.video-container { 
  margin: 15px 0; 
  border-radius:12px; 
  overflow:hidden; 
  max-height:280px; 
  background:#f8f9fa; 
  position: relative;
  aspect-ratio: 16/9;
}
.video-container iframe { 
  width:100%; 
  height:100%; 
  border:none; 
}

/* BOTONES MODAL */
.modal-buttons { 
  display:flex; 
  gap:12px; 
  flex-wrap:wrap; 
  margin-top:15px; 
}
.modal-buttons a {
  display:inline-flex; 
  align-items:center; 
  justify-content:center; 
  gap:8px;
  padding:12px 24px; 
  border-radius:30px; 
  font-weight:bold; 
  text-decoration:none;
  transition: all .3s; 
  color:#fff;
  font-size: 0.95rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.btn-amazon { background:#ff9900; } .btn-amazon:hover { background:#e68a00; }
.btn-casadelibro { background:#3498db; } .btn-casadelibro:hover { background:#2980b9; }
.btn-directo { background:#27ae60; } .btn-directo:hover { background:#1e8449; }

/* === FOOTER === */
.footer {
  background: #0a1a2e;
  color: #fff;
  padding: 60px 20px 30px;
  text-align: center;
  margin-top: 20px;
}
.footer-logo {
  font-size: 2rem;
  color: #f1c40f;
  margin-bottom: 15px;
}
.footer-text {
  font-size: 1rem;
  color: #ccc;
  margin-bottom: 25px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}
.footer-links {
  display: flex;
  justify-content: center;
  gap: 30px;
  margin-bottom: 20px;
}
.footer-links a {
  color: #bbb;
  text-decoration: none;
  font-size: 0.9rem;
  transition: color 0.3s;
}
.footer-links a:hover {
  color: #f1c40f;
}
.footer-copyright {
  font-size: 0.85rem;
  color: #777;
  border-top: 1px solid rgba(255,255,255,0.1);
  padding-top: 20px;
  margin-top: 30px;
}

/* RESPONSIVE */
@media (min-width: 768px) {
  .books-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .author-container {
    flex-direction: row;
    align-items: flex-start;
    text-align: left;
  }
  
  .author-info {
    text-align: left;
    margin-left: 40px;
  }
  
  .author-name:after {
    left: 0;
    transform: none;
  }
  
  .modal-content {
    flex-direction: row;
  }
  
  .modal-left {
    width: 40%;
    border-right: 1px solid #eee;
    border-bottom: none;
  }
  
  .modal-right {
    width: 60%;
  }
  
  .top-menu {
    padding: 15px 30px;
  }
  
  .logo h1 {
    font-size: 1.8rem;
  }
  
  .menu-icons {
    gap: 20px;
  }
  
  .menu-icon {
    font-size: 1.5rem;
  }
  
  .slider-container {
    height: 850px;
  }
  
  .slide-title {
    font-size: 3rem;
  }
  
  .slide-description {
    font-size: 1.4rem;
  }
}

@media (min-width: 992px) {
  .books-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 25px;
    padding: 0 20px;
  }
  
  .card {
    border-radius: 16px;
  }
  
  .card-overlay {
    padding: 25px;
  }
  
  .card-title {
    font-size: 18px;
  }
  
  .card-author {
    font-size: 15px;
  }
  
  .author-section {
    padding: 100px 40px;
  }
  
  .author-image {
    width: 220px;
    height: 220px;
  }
  
  .author-name {
    font-size: 2.5rem;
  }
  
  .books-header h2 {
    font-size: 2.3rem;
  }
}

@media (max-width: 480px) {
  .books-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    padding: 0 10px;
  }
  
  .card-title {
    font-size: 14px;
  }
  
  .card-author {
    font-size: 12px;
  }
  
  .modal-buttons {
    flex-direction: column;
  }
  
  .modal-buttons a {
    width: 100%;
    text-align: center;
  }
  
  .author-image {
    width: 140px;
    height: 140px;
  }
  
  .author-name {
    font-size: 1.8rem;
  }
  
  .author-bio {
    font-size: 1rem;
  }
  
  .author-details {
    gap: 10px;
  }
  
  .author-detail {
    min-width: 110px;
    padding: 10px;
  }
  
  .detail-value {
    font-size: 1.3rem;
  }
  
  .slider-container {
    height: 400px;
  }
  
  .slide-title {
    font-size: 1.8rem;
    line-height: 1.2;
  }
  
  .slide-description {
    font-size: 1rem;
    margin-bottom: 20px;
  }
  
  .btn-buy {
    padding: 10px 24px;
    font-size: 0.9rem;
    gap: 6px;
  }
  
  .modal-header {
    padding: 20px 20px;
  }
  
  .modal-title {
    font-size: 1.5rem;
  }
  
  .close {
    font-size: 24px;
  }
}
</style>
</head>
<body>

<!-- LOADING SCREEN -->
<div class="loading" id="loading">
  <div class="spinner"></div>
  <div class="loading-text">Cargando biblioteca...</div>
</div>

<!-- HEADER + SLIDER -->
<div class="header-container">
  <div class="top-menu">
    <div class="logo"><i class="fas fa-book-reader"></i><h1>Biblioteca Premium</h1></div>
    <div class="menu-icons">
      <div class="menu-icon"><i class="fas fa-home"></i></div>
      <div class="menu-icon"><i class="fas fa-book-open"></i></div>
      <div class="menu-icon"><i class="fas fa-heart"></i></div>
      <div class="menu-icon"><i class="fas fa-search"></i></div>
      <div class="menu-icon"><i class="fas fa-user"></i></div>
    </div>
  </div>

  <div class="slider-container">
    <!-- SLIDE 1 -->
    <div class="slide active">
      <img loading="lazy" src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80" alt="Cien años de soledad" class="lazy-image">
      <div class="slide-overlay">
        <h3 class="slide-title">Descubre Nuevos Mundos</h3>
        <p class="slide-description">Explora nuestra colección de bestsellers y libros exclusivos para todos los gustos.</p>
        <a href="#" class="btn-buy"><i class="fas fa-shopping-cart"></i> Comprar</a>
      </div>
    </div>

    <!-- SLIDE 2 -->
    <div class="slide">
      <img loading="lazy" src="https://images.unsplash.com/photo-1506880018633-aed9dcfbcfcd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80" alt="1984" class="lazy-image">
      <div class="slide-overlay">
        <h3 class="slide-title">Clásicos Atemporales</h3>
        <p class="slide-description">Revive las obras maestras que han marcado generaciones enteras.</p>
        <a href="#" class="btn-buy"><i class="fas fa-shopping-cart"></i> Comprar</a>
      </div>
    </div>

    <!-- SLIDE 3 -->
    <div class="slide">
      <img loading="lazy" src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1600&q=80" alt="El Señor de los Anillos" class="lazy-image">
      <div class="slide-overlay">
        <h3 class="slide-title">Fantasía y Aventura</h3>
        <p class="slide-description">Sumérgete en universos épicos llenos de magia y personajes inolvidables.</p>
        <a href="#" class="btn-buy"><i class="fas fa-shopping-cart"></i> Comprar</a>
      </div>
    </div>

    <div class="slider-nav">
      <div class="slider-dot active" data-slide="0"></div>
      <div class="slider-dot" data-slide="1"></div>
      <div class="slider-dot" data-slide="2"></div>
    </div>
  </div>
</div>

<!-- SECCIÓN AUTOR -->
<section class="author-section">
  <div class="author-container">
    <img loading="lazy" src="https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Aitor García" class="author-image">
    <div class="author-info">
      <h2 class="author-name">Aitor García</h2>
      <p class="author-bio">
        Escritor contemporáneo de narrativa fantástica y realismo mágico. Sus novelas han sido traducidas a más de 12 idiomas y galardonadas internacionalmente.
      </p>
      <div class="author-details">
        <div class="author-detail">
          <span class="detail-value">12</span>
          <span class="detail-label">Obras publicadas</span>
        </div>
        <div class="author-detail">
          <span class="detail-value">8</span>
          <span class="detail-label">Premios literarios</span>
        </div>
        <div class="author-detail">
          <span class="detail-value">15+</span>
          <span class="detail-label">Años de experiencia</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- LIBROS -->
<section class="books-section">
  <div class="books-header">
    <h2>Obras publicadas</h2><br/><br/><br/>
  </div>
  <div id="library" class="books-grid"></div>
</section>

<!-- MODAL -->
<div id="bookModal" class="modal" aria-hidden="true">
  <div class="modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-header">
      <h2 class="modal-title" id="modal-title">Título del libro</h2>
      <button class="close" aria-label="Cerrar modal">&times;</button>
    </div>
    <div class="modal-content">
      <div class="modal-left">
        <img id="modal-cover" src="" alt="Portada libro" loading="lazy">
        <div class="modal-rating" id="modal-rating">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
        </div>
        <span class="rating-text" id="rating-text">4.8 / 5</span>
        
        <div class="modal-details">
          <div class="detail-item"><span class="detail-label">Páginas:</span><span class="detail-value" id="modal-pages">320</span></div>
          <div class="detail-item"><span class="detail-label">ISBN:</span><span class="detail-value" id="modal-isbn">123-4567890123</span></div>
          <div class="detail-item"><span class="detail-label">Idioma:</span><span class="detail-value" id="modal-language">Español</span></div>
          <div class="detail-item"><span class="detail-label">Editorial:</span><span class="detail-value" id="modal-publisher">Ejemplo Editorial</span></div>
          <div class="detail-item"><span class="detail-label">Año:</span><span class="detail-value" id="modal-year">2023</span></div>
          <div class="detail-item"><span class="detail-label">Género:</span><span class="detail-value" id="modal-genre">Novela</span></div>
        </div>
      </div>
      <div class="modal-right">
        <h4 class="modal-subtitle" id="modal-subtitle">Subtítulo / Autor</h4>
        <div class="modal-description-container">
          <p class="modal-description" id="modal-description">Descripción completa del libro...</p>
        </div>
        <div class="video-container">
          <iframe id="modal-video" src="" frameborder="0" allowfullscreen loading="lazy"></iframe>
        </div>
        <div class="modal-buttons">
          <a href="#" target="_blank" class="btn-amazon"><i class="fab fa-amazon"></i> Comprar en Amazon</a>
          <a href="#" target="_blank" class="btn-casadelibro"><i class="fas fa-store"></i> Comprar Casa del Libro</a>
          <a href="#" target="_blank" class="btn-directo"><i class="fas fa-shopping-cart"></i> Comprar Directo</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer class="footer">
  <div class="footer-logo"><i class="fas fa-book-reader"></i></div>
  <p class="footer-text">Biblioteca Premium es una plataforma dedicada a la exploración profunda de la literatura contemporánea y clásica. Descubre historias que trascienden el tiempo.</p>
  <div class="footer-links">
    <a href="#">Sobre nosotros</a>
    <a href="#">Contacto</a>
    <a href="#">Privacidad</a>
    <a href="#">Términos</a>
  </div>
  <p class="footer-copyright">© 2025 Biblioteca Premium. Todos los derechos reservados.</p>
</footer>

<script>
/* =========================
   DATOS DE LIBROS
   ========================= */
const libros = [
  { 
    titulo:"Cien años de soledad", 
    autor:"Gabriel García Márquez", 
    subtitulo:"Obra maestra del realismo mágico", 
    genero:"Realismo Mágico",
    portada:"https://m.media-amazon.com/images/I/61lJydEa4RL.jpg", 
    descripcion:"Novela sobre la familia Buendía en el pueblo ficticio de Macondo. Considerada una obra maestra de la literatura hispanoamericana y universal.", 
    paginas:471, 
    isbn:"978-8439721102", 
    idioma:"Español", 
    editorial:"Sudamericana", 
    año:1967, 
    rating:4.8, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  },
  { 
    titulo:"1984", 
    autor:"George Orwell", 
    subtitulo:"Distopía", 
    genero:"Distopía",
    portada:"https://m.media-amazon.com/images/I/61lJydEa4RL.jpg", 
    descripcion:"Winston Smith vive en un estado totalitario bajo el control del Gran Hermano. Una visión aterradora de un futuro controlado por la vigilancia constante.", 
    paginas:328, 
    isbn:"978-0451524935", 
    idioma:"Español", 
    editorial:"Debolsillo", 
    año:1949, 
    rating:4.7, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  },
  { 
    titulo:"El Señor de los Anillos", 
    autor:"J.R.R. Tolkien", 
    subtitulo:"La comunidad del anillo", 
    genero:"Fantasía Épica",
    portada:"https://m.media-amazon.com/images/I/61lJydEa4RL.jpg", 
    descripcion:"Frodo Bolsón y la misión de destruir el Anillo Único en el Monte del Destino. Una épica aventura en la Tierra Media.", 
    paginas:576, 
    isbn:"978-8445000660", 
    idioma:"Español", 
    editorial:"Minotauro", 
    año:1954, 
    rating:4.9, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  },
  { 
    titulo:"Don Quijote de la Mancha", 
    autor:"Miguel de Cervantes", 
    subtitulo:"El ingenioso hidalgo", 
    genero:"Novela Clásica",
    portada:"image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='300' viewBox='0 0 200 300' fill='%231a2b4a'%3E%3Crect width='200' height='300' fill='%231a2b4a'/%3E%3Ctext x='100' y='150' font-family='Arial' font-size='15' fill='%23f1c40f' text-anchor='middle'%3EDon Quijote%3C/text%3E%3C/svg%3E", 
    descripcion:"Las aventuras de Don Quijote y Sancho Panza. Considerada la primera novela moderna y una de las mejores obras de la literatura universal.", 
    paginas:863, 
    isbn:"978-8424113968", 
    idioma:"Español", 
    editorial:"Editorial EDAF", 
    año:1605, 
    rating:4.8, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  },
  { 
    titulo:"Rayuela", 
    autor:"Julio Cortázar", 
    subtitulo:"Una novela contranovela", 
    genero:"Novela Experimental",
    portada:"https://m.media-amazon.com/images/I/61lJydEa4RL.jpg", 
    descripcion:"La historia de Horacio Oliveira en París y Buenos Aires. Una obra innovadora que puede leerse de múltiples maneras.", 
    paginas:736, 
    isbn:"978-8432216429", 
    idioma:"Español", 
    editorial:"Alfaguara", 
    año:1963, 
    rating:4.6, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  },
  { 
    titulo:"Ficciones", 
    autor:"Jorge Luis Borges", 
    subtitulo:"Colección de cuentos", 
    genero:"Ficción",
    portada:"https://m.media-amazon.com/images/I/61lJydEa4RL.jpg", 
    descripcion:"Relatos que exploran laberintos, espejos y realidades alternativas. Una de las obras cumbres de la literatura del siglo XX.", 
    paginas:237, 
    isbn:"978-8426413767", 
    idioma:"Español", 
    editorial:"Editorial Debolsillo", 
    año:1944, 
    rating:4.9, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  },
  { 
    titulo:"La Sombra del Viento", 
    autor:"Carlos Ruiz Zafón", 
    subtitulo:"El cementerio de los libros olvidados", 
    genero:"Misterio",
    portada:"https://m.media-amazon.com/images/I/61lJydEa4RL.jpg", 
    descripcion:"Daniel Sempere descubre un libro maldito en el Barcelona de posguerra. Una novela de misterio y amor por los libros.", 
    paginas:565, 
    isbn:"978-8408092311", 
    idioma:"Español", 
    editorial:"Planeta", 
    año:2001, 
    rating:4.7, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  },
  { 
    titulo:"Crimen y Castigo", 
    autor:"Fiódor Dostoyevski", 
    subtitulo:"Novela psicológica", 
    genero:"Clásico Ruso",
    portada:"https://m.media-amazon.com/images/I/61lJydEa4RL.jpg", 
    descripcion:"Raskólnikov comete un crimen y sufre las consecuencias morales. Un profundo análisis de la psicología humana.", 
    paginas:527, 
    isbn:"978-8420665154", 
    idioma:"Español", 
    editorial:"Alianza Editorial", 
    año:1866, 
    rating:4.8, 
    video:"https://www.youtube.com/embed/CTdm5tTu6pE"
  }
];

const realImages = [
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg",
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg",
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg",
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg",
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg",
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg",
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg",
  "https://m.media-amazon.com/images/I/61lJydEa4RL.jpg"
];

/* =========================
   RENDERIZADO DE LIBROS
   ========================= */
const libraryContainer = document.getElementById('library');
function renderLibrary() {
  libraryContainer.innerHTML = '';
  libros.forEach((libro, index) => {
    const card = document.createElement('a'); 
    card.href="#"; 
    card.className="card";
    card.innerHTML=`<img loading="lazy" src="${libro.portada}" data-src="${realImages[index % realImages.length]}" alt="${libro.titulo}" class="lazy-image">
      <div class="card-overlay">
        <div class="card-title">${libro.titulo}</div>
        <div class="card-author">${libro.autor}</div>
      </div>`;
    card.addEventListener('click', e => {
      e.preventDefault(); 
      openBookModal(libro);
    });
    libraryContainer.appendChild(card);
  });
  lazyLoadImages();
}

/* =========================
   CARGA DIFERIDA DE IMÁGENES
   ========================= */
function lazyLoadImages() {
  const lazyImages = document.querySelectorAll('.lazy-image');
  
  if ('IntersectionObserver' in window) {
    const imageObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          if (img.dataset.src) {
            img.src = img.dataset.src.trim();
          }
          img.removeAttribute('data-src');
          img.classList.remove('lazy-image');
          imageObserver.unobserve(img);
        }
      });
    }, { rootMargin: '200px 0px', threshold: 0.01 });

    lazyImages.forEach(img => {
      imageObserver.observe(img);
    });
  } else {
    lazyImages.forEach(img => {
      if (img.dataset.src) img.src = img.dataset.src.trim();
      img.classList.remove('lazy-image');
    });
  }
}

/* =========================
   MODAL
   ========================= */
const modal = document.getElementById('bookModal');
const modalCover = document.getElementById('modal-cover');
const modalTitle = document.getElementById('modal-title');
const modalSubtitle = document.getElementById('modal-subtitle');
const modalDescription = document.getElementById('modal-description');
const modalPages = document.getElementById('modal-pages');
const modalISBN = document.getElementById('modal-isbn');
const modalLanguage = document.getElementById('modal-language');
const modalPublisher = document.getElementById('modal-publisher');
const modalYear = document.getElementById('modal-year');
const modalGenre = document.getElementById('modal-genre');
const modalRating = document.getElementById('modal-rating');
const ratingText = document.getElementById('rating-text');
const modalVideo = document.getElementById('modal-video');

function renderRatingStars(rating) {
  const fullStars = Math.floor(rating);
  const hasHalfStar = rating - fullStars >= 0.5;
  
  modalRating.innerHTML = '';
  
  for (let i = 0; i < 5; i++) {
    const star = document.createElement('i');
    if (i < fullStars) {
      star.className = 'fas fa-star';
    } else if (i === fullStars && hasHalfStar) {
      star.className = 'fas fa-star-half-alt';
    } else {
      star.className = 'far fa-star';
    }
    modalRating.appendChild(star);
  }
  
  ratingText.textContent = `${rating.toFixed(1)} / 5`;
}

function openBookModal(libro) {
  const bookIndex = libros.findIndex(l => l.titulo === libro.titulo);
  modalCover.src = realImages[bookIndex % realImages.length];
  
  modalTitle.textContent = libro.titulo;
  modalSubtitle.textContent = libro.subtitulo + " / " + libro.autor;
  modalDescription.textContent = libro.descripcion;
  modalPages.textContent = libro.paginas;
  modalISBN.textContent = libro.isbn;
  modalLanguage.textContent = libro.idioma;
  modalPublisher.textContent = libro.editorial;
  modalYear.textContent = libro.año;
  modalGenre.textContent = libro.genero;
  
  renderRatingStars(libro.rating);
  
  modalVideo.src = libro.video.trim();
  modal.classList.add('show');
  
  const iframe = modalVideo;
  const videoSrc = iframe.src;
  
  const closeBtn = modal.querySelector('.close');
  const newCloseBtn = closeBtn.cloneNode(true);
  closeBtn.parentNode.replaceChild(newCloseBtn, closeBtn);
  
  newCloseBtn.addEventListener('click', () => {
    modal.classList.remove('show');
    iframe.src = "";
    setTimeout(() => {
      iframe.src = videoSrc;
    }, 300);
  });
}

modal.addEventListener('click', (e) => {
  if (e.target === modal) {
    modal.classList.remove('show');
    modalVideo.src = "";
  }
});

/* =========================
   SLIDER
   ========================= */
const slides = document.querySelectorAll('.slide');
const dots = document.querySelectorAll('.slider-dot');
let currentSlide = 0;
let slideInterval;

function showSlide(n) {
  slides.forEach((s, i) => {
    s.classList.toggle('active', i === n);
    dots[i].classList.toggle('active', i === n);
  });
  
  const activeSlideImg = slides[n].querySelector('.lazy-image');
  if (activeSlideImg && activeSlideImg.classList.contains('lazy-image')) {
    if (activeSlideImg.dataset.src) {
      activeSlideImg.src = activeSlideImg.dataset.src.trim();
      activeSlideImg.removeAttribute('data-src');
    }
    activeSlideImg.classList.remove('lazy-image');
  }
}

function startSlider() {
  slideInterval = setInterval(() => {
    currentSlide = (currentSlide + 1) % slides.length;
    showSlide(currentSlide);
  }, 5000);
}

dots.forEach(dot => {
  dot.addEventListener('click', () => {
    clearInterval(slideInterval);
    currentSlide = parseInt(dot.dataset.slide);
    showSlide(currentSlide);
    startSlider();
  });
});

/* =========================
   PRELOADER Y CARGA INICIAL
   ========================= */
window.addEventListener('load', function() {
  const loading = document.getElementById('loading');
  
  renderLibrary();
  startSlider();
  
  realImages.forEach(src => {
    const img = new Image();
    img.src = src.trim();
  });

  requestAnimationFrame(() => {
    setTimeout(() => {
      loading.classList.add('hidden');
    }, 250);
  });
});

if (document.readyState === 'complete') {
  document.getElementById('loading').classList.add('hidden');
  renderLibrary();
  startSlider();
}
</script>
</body>
</html>
